var __opendace=function(){var ms=0,c={},version="1.0.2649",daceVidCookieKey3="_dacevid3",daceVisitCookieKey="__dacevst",daceUserFlag="__daceUserFlag",domain=".hupu.com",pageLoadTime=0,isSend=false,domainUrl=/^https/i.test(location.href)?"https://ccdace.hupu.com":"http://cc.dace.hupu.com",engine=["www.google.com.hk","www.google.com","www.baidu.com","www.so.com","www.sogou.com","www.soso.com","cn.bing.com","glb.uc.cn","so.360.cn","www.youdao.com","search.cn.yahoo.com","www.jike.com","pad.easou.com","www.zhongsou.com","image.baidu.com","images.baidu.com","m.baidu.com","images.google.com","images.google.com.hk","m.sm.cn","www.haosou.com"],queue=[],domainHost=window.location.hostname;var _userAgent=navigator.userAgent.toLowerCase();var browser={version:(_userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],chrome:/chrome/.test(_userAgent),safari:/webkit/.test(_userAgent),opera:/opera/.test(_userAgent),msie:/msie/.test(_userAgent)&&!/opera/.test(_userAgent),mozilla:/mozilla/.test(_userAgent)&&!/(compatible|webkit)/.test(_userAgent),mobile:/Mobile/i.test(_userAgent),ios:/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(_userAgent),iphone:/iphone/i.test(_userAgent),ipad:/ipad/i.test(_userAgent),android:/android/i.test(_userAgent)||/Linux/i.test(_userAgent)};var dom={getClass:function(c){p=document;if(p.getElementsByClassName){return p.getElementsByClassName(c)}else{var i=0,results=[],nodes=p.getElementsByTagName("*"),l=nodes.length,pattern=new RegExp("(^|\\s)"+c+"(\\s|$)");for(;i>l;i++)pattern.test(nodes[i].className)&&results.push(nodes[i]);return results}}};var CookieUtil={getRaw:function(key){if(CookieUtil._isValidKey(key)){var reg=new RegExp("(^| )"+key+"=([^;]*)(;|$)"),result=reg.exec(document.cookie);if(result){return result[2]||null}}return null},get:function(key){var value=CookieUtil.getRaw(key);if("string"==typeof value){value=decodeURIComponent(value);return value}return null},setRaw:function(key,value,options){if(!CookieUtil._isValidKey(key)){return}options=options||{};var expires=options.expires;if("number"==typeof options.expires){expires=new Date;expires.setTime(expires.getTime()+options.expires)}document.cookie=key+"="+value+(options.path?"; path="+options.path:"")+(expires?"; expires="+expires.toGMTString():"")+(options.domain?"; domain="+options.domain:"")+(options.secure?"; secure":"")},set:function(key,value,options){CookieUtil.setRaw(key,encodeURIComponent(value),options)},remove:function(key,options){options=options||{};options.expires=new Date(0);CookieUtil.setRaw(key,"",options)},_isValidKey:function(key){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(key)}};function He(a,b){return a.onload=b}trim=function(source){var trimer=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return source.replace(trimer,"")};var isUrl=function(value){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)};var S4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},newGuid=function(){return S4()+S4()+"."+S4()+"."+S4()+"."+S4()+"."+S4()+S4()+S4()};var getActionId=function(){return S4()+S4()+"."+S4()+S4()},actionId=getActionId();var unixTimestamp=function(type){var d=new Date;return type==false?d.getTime():Math.round(d.getTime()/1e3)},btime=unixTimestamp(false);var pd=function(a){var b=[],c=document.cookie["split"](";");a=RegExp("^\\s*"+a+"=\\s*(.*?)\\s*$");for(var d=0;d<c["length"];d++){var e=c[d]["match"](a);e&&b["push"](e[1])}return b};var saveVid3Cookie=function(){var date=new Date;var url=domainUrl+"/dacevid.php?callback=_DACE_GetVid&q="+date.getTime()+Math.random()*1e6;var script=document.createElement("script");script.setAttribute("src",url);document.getElementsByTagName("head")[0].appendChild(script)};window._DACE_GetVid=function(vid,newUser){if(vid){CookieUtil.setRaw(daceVidCookieKey3,vid,{domain:domainHost,path:"/"});var con=new init("a");if(queue){for(var i=0,l=queue.length;i<l;i++){var uri=con.generateUrl(queue[i][0],queue[i][1],queue[i][2]);con.sendImage(uri);isSend=true}}}};var saveVisitsToCookie=function(){var vst=getActionId();var dacevst=CookieUtil.getRaw(daceVisitCookieKey);var d=new Date,millisec=d.getTime();d.setUTCMinutes(d.getUTCMinutes()+30);var expires=d.getTime();if(dacevst){if(expires<=millisec){CookieUtil.remove(daceVisitCookieKey)}else{CookieUtil.remove(daceVisitCookieKey);vst=dacevst.split("|")[0]}}CookieUtil.setRaw(daceVisitCookieKey,vst+"|"+expires,{expires:30*60*1e3,domain:domainHost,path:"/"});return vst};var delCookie=function(){var date=new Date(0);CookieUtil.remove("_daceid")};var pageLoadTimeFun=function(){var at=(new Date).getTime();var ms=at-btime;return ms};var storage={scrollYMax:0,focusTime:btime,activeTime:0,_getScrollYMax:function(){if(window.scrollY>this.scrollYMax)this.scrollYMax=document.documentElement.scrollTop||document.body.scrollTop}};var _win=window,_doc=document;var EventUtil={ready:function(func){var _readyList=[];_readyList.push(func);if(browser.msie){EventUtil.removeHandler(_doc,"readystatechange",_DOMContentLoaded);EventUtil.addHandler(_doc,"readystatechange",_DOMContentLoaded)}else{EventUtil.addHandler(_win,"DOMContentLoaded",_DOMContentLoaded)}function _DOMContentLoaded(){if(browser.msie){if(_doc.readyState==="complete"||_doc.readyState==="interactive"){EventUtil.removeHandler(_doc,"readystatechange",_DOMContentLoaded);_startReady()}}else{EventUtil.removeHandler(_win,"DOMContentLoaded",_DOMContentLoaded);_startReady()}}function _startReady(){for(var i=0,len=_readyList.length;i<len;i++){setTimeout(_readyList[i],25)}}},addHandler:function(elem,type,handler){var guid=1;if(window.addEventListener){elem.addEventListener(type,handler,false);return}if(!guid)handler.guid=guid++;if(!elem.events)elem.events={};var handlers=elem.events[type];if(!handlers){handlers=elem.events[type]={};if(elem["on"+type]){handlers[0]=elem["on"+type]}}handlers[handler.guid]=handler;elem["on"+type]=_handleEvent;function _handleEvent(event){var event=event||window.event;var handles=this.events[event.type];for(var i in handles){handles[i].call(this,event)}}},addHandlerCompatibility:function(target,type,func){if(target.addEventListener)target.addEventListener(type,func,false);else if(target.attachEvent)target.attachEvent("on"+type,func);else target["on"+type]=func},getEvent:function(event){return event?event:window.event},getTarget:function(event){return event.target||event.srcElement},removeHandler:function(element,type,handler){if(element.removeEventListener){element.removeEventListener(type,handler,false)}else if(element.detachEvent){element.detachEvent("on"+type,handler)}else{element["on"+type]=null}},stopPropagation:function(event){if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}}};var in_array=function(needle,haystack,argStrict){var key="",strict=!!argStrict;if(strict){for(key in haystack){if(haystack[key]===needle){return true}}}else{for(key in haystack){if(haystack[key]==needle){return true}}}return false};var mkaUtil={res:[0,0,0],keys:new Array,prepaste:false,isctrlv:false,mf:false,doFocus:function(e){var e=e||window.event;var obj=e.target||e.srcElement;var t=obj.type||obj.getAttribute("type");if(t=="text"||t=="password"){mkaUtil.keys=new Array;mkaUtil.prepaste=mkaUtil.mf?true:false;mkaUtil.isctrlv=false;mkaUtil.mf=false}},doKey:function(e){var currKey=0,e=e||window.event;currKey=e.keyCode||e.which||e.charCode;var keyName=String.fromCharCode(currKey);var obj=e.target||e.srcElement;var t=obj.type||obj.getAttribute("type");if(t=="text"||t=="password"){if(currKey){mkaUtil.keys.push(keyName)}if(e.ctrlKey&&currKey==86){mkaUtil.isctrlv=true;if(this.name=="username"){mkaUtil.res[0]=1}if(this.name=="password"){mkaUtil.res[1]=1}if(this.name=="password2"){mkaUtil.res[2]=1}}}},doMouse:function(e){var e=e||window.event;var obj=e.target||e.srcElement;var t=obj.type||obj.getAttribute("type");if(t=="text"||t=="password"){if(e.button==2&&mkaUtil.keys.length==0){mkaUtil.prepaste=true}if(e.button==2&&mkaUtil.keys.length!=0&&!this.value){mkaUtil.mf=true}if(e.button==2&&mkaUtil.keys.length==0&&!this.value){mkaUtil.mf=true}}},doPaste:function(e){if(mkaUtil.prepaste&&!mkaUtil.isctrlv){if(this.name=="username"){mkaUtil.res[0]=2}if(this.name=="password"){mkaUtil.res[1]=2}if(this.name=="password2"){mkaUtil.res[2]=2}}}};function mkListener(){var objs=document.getElementById("reg").getElementsByTagName("input");if(objs){for(obj in objs){objs[obj].onkeydown=mkaUtil.doKey;objs[obj].onmousedown=mkaUtil.doMouse;objs[obj].onpaste=mkaUtil.doPaste;objs[obj].onfocus=mkaUtil.doFocus}}}function init(siteId){var o=o||{};o.sendImage=function(uri){var host;if(uri.indexOf("et=")<0)host=domainUrl+"/_dace.gif?et=rd_e_pal_open&";else host=domainUrl+"/_dace.gif?";var d=new Image(1,1);d.src=host+uri;He(d,function(){He(d,"")})};o.getHost=function(){var host=domainHost.split(".");host.shift();return host.join(".")};o.siteId=siteId;o.getSiteId=function(){return DACE_SITE_ID||"ukn"};o.theOneActId=function(){var actIdFromCookie=pd("_daceactid");if(actIdFromCookie.length>0){return actIdFromCookie}else{var actId=getActionId();CookieUtil.setRaw("_daceactid",actId,{expires:60*60*24*365*1e3,domain:domain,path:"/"});return actId}};o.getKeyByCookie=function(k,fun){var inCookie=CookieUtil.getRaw(k);return inCookie?inCookie:fun()};o.getWindowInfo=function(){var a={},b=window["navigator"],c=window.screen;a.crs=c?c.width+"x"+c.height:"-";a.ccd=c?c.colorDepth+"-bit":"-";a.cbl=(b&&(b.language||b.browserLanguage)||"-")["toLowerCase"]();a.cjv=b&&b.javaEnabled()?1:0;a.cck=b&&b.cookieEnabled?1:0;var hasPlugin=function(name){name=name.toLowerCase();for(var i=0;i<navigator.plugins.length;i++){if(navigator.plugins[i].name.toLowerCase().indexOf(name)>-1){return true}}return false},hasIEPlugin=function(name){try{new ActiveXObject(name);return true}catch(ex){return false}},hasFlash=function(){var result=hasPlugin("Flash");if(!result){result=hasIEPlugin("ShockwaveFlash.ShockwaveFlash")}return result};a.cfl=hasFlash()?1:0;a.v=version;return a};o.getReferer=function(){var a=a||{},referrer=document.referrer;var rf_domain=referrer.replace(new RegExp("\r","g"),"",referrer);rf_domain=rf_domain.replace(new RegExp("\n","g"),"",rf_domain);if(!referrer){}else if(rf_domain.indexOf(this.getHost())>0){a.rtp="il";a.rnm="";a.rurl=referrer;a.rkw=""}else{if(rf_domain){function getUrlParams(paramsName){var sUrl=document.referrer;var sReg=paramsName+"=([^&|/]*)";var re=new RegExp(sReg,"gi");re.exec(sUrl);var value=RegExp.$1;if(value){return value}return""}function parseKeywords(domain){if(!domain){return false}var searchTerms="";if(domain.indexOf("baidu.com")>=0){var wd=getUrlParams("wd");var kw=getUrlParams("kw");var word=getUrlParams("word");var wap_w=getUrlParams("w");if(trim(wd)){return wd}else if(trim(kw)){return kw}else if(trim(word)){return word}else if(trim(wap_w)){return wap_w}else{return searchTerms}}else if(domain.indexOf("so.360.cn")>=0||domain.indexOf("pad.easou.com")>=0||domain.indexOf("jike.com")>=0||domain.indexOf("yahoo.com")>=0||domain.indexOf("youdao.com")>=0||domain.indexOf("bing.com")>=0||domain.indexOf("google")>=0||domain.indexOf("www.so.com")>=0||domain.indexOf("m.sm.cn")>=0||domain.indexOf("www.haosou.com")>=0){searchTerms=trim(getUrlParams("q"))}else if(domain.indexOf("sogou.com")>=0){searchTerms=trim(getUrlParams("query"))}else if(domain.indexOf("zhongsou.com")>=0||domain.indexOf("www.soso.com")>=0){searchTerms=trim(getUrlParams("w"))}else if(domain.indexOf("uc.cn")>=0){searchTerms=trim(getUrlParams("keyword"))}if(domain.indexOf("baidu.com")<0&&!searchTerms){return"ukn"}return searchTerms}for(var i=0;i<engine.length;i++){if(rf_domain==engine[i]||rf_domain.indexOf("google")>=0){var keywords=parseKeywords(rf_domain);a.rtp="se";a.rnm="";a.rurl=rf_domain;if(rf_domain=="m.baidu.com"){a.rkw="";a.mrkw=keywords}else{a.rkw=keywords;a.mrkw=keywords}break}else{a.rtp="ol";a.rnm="";a.rurl=rf_domain;a.rkw=""}}}}return a};o.generateUrl=function(action,click_xy,click_link){var vid=CookieUtil.getRaw(daceVidCookieKey3);if(vid){return this._generateUrl(action,click_xy,click_link)}else{if(action=="l")return this._generateUrl(action,click_xy,click_link);queue.push([action,click_xy,click_link]);return false}};o._generateUrl=function(action,click_xy,click_link){var a={};if(action=="i"){a.vid=CookieUtil.getRaw(daceVidCookieKey3);window._dace_Vid=a.vid}else{a.vid=_dace_Vid}a.sid=o.getSiteId();a.aid=actionId?actionId:getActionId();a.vst=saveVisitsToCookie();a.act=action?action:"i";a.cxy=click_xy?click_xy:"";a.clk=click_link?click_link:"";if(a.act=="l"){if(pageLoadTime){a.plt=pageLoadTime}else{a.plt=0-pageLoadTimeFun()}a.dur=storage.activeTime;a.prd=storage.scrollYMax}else{a.plt=0}a.url=window.location.href;var uriArray=[];for(var p in a){uriArray.push(p+"="+encodeURIComponent(a[p]))}var winInfo=o.getWindowInfo();for(var i in winInfo){uriArray.push(i+"="+winInfo[i])}var referrer=o.getReferer();if(typeof referrer=="object"){for(var r in referrer){var $r=referrer[r].replace(new RegExp("\r","g"),"",referrer[r]);$r=$r.replace(new RegExp("\n","g"),"",$r);uriArray.push(r+"="+(r!="rkw"?encodeURIComponent(referrer[r]):referrer[r]))}}else{uriArray.push("rtp=");uriArray.push("rnm=");uriArray.push("rurl=");uriArray.push("rkw=")}var uri=uriArray.join("&");return uri};o.requestFun=function(){pd("_daceid").length>0?delCookie():"";var uri=o.generateUrl("i","","");if(uri)o.sendImage(uri);isSend=true};o.clickRequestFun=function(){EventUtil.ready(function(){var list=document.body,target=null;EventUtil.addHandler(list,"mousedown",function(event){var e=EventUtil.getEvent(event);var target=EventUtil.getTarget(e);var nodeName=target.nodeName.toLowerCase();while("a"!=nodeName&&"body"!=nodeName){target=target.parentElement;if(!target){break}nodeName=target.nodeName.toLowerCase()}if(target!=undefined&&target){var a=target.nodeName.toLowerCase();var link=target.href;var flag=/^javascript:/i.test(link);dace_clk_attr="";if(flag)var dace_clk_attr=target.getAttribute("dace_clk");var link=dace_clk_attr?dace_clk_attr:link;if(a==="a"&&link!=undefined&&link!=""){var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;var clientWidth=document.documentElement.clientWidth||document.body.clientWidth;if(dom.getClass("hp-topbarNav-bd")[0]){var contentWidth=dom.getClass("hp-topbarNav-bd")[0].offsetWidth;var padWidth=clientWidth-contentWidth>=0?clientWidth-contentWidth:0;var x=e.pageX||e.clientX+scrollX;var y=e.pageY||e.clientY+scrollY;x=x-Math.round(padWidth/2)}else{var x=e.pageX||e.clientX+scrollX;var y=e.pageY||e.clientY+scrollY}var xy=x+","+y;var uri=o.generateUrl("c",xy,link);if(uri)o.sendImage(uri)}}})})},o.leaveRequestFun=function(){var ev=browser.msie?"beforeunload":"unload";EventUtil.addHandler(window,ev,function(){storage.activeTime=storage.activeTime+((new Date).getTime()-storage.focusTime);var uri=o.generateUrl("l","","");if(uri)o.sendImage(uri);if(!isSend){o.requestFun()}})},o.sendEvent=function(eid,body){if(eid){var vid=CookieUtil.getRaw(daceVidCookieKey3),aid=actionId?actionId:getActionId(),vst=saveVisitsToCookie(),ua=document.cookie.match(new RegExp("(^| )ua=([^;]*)(;|$)")),date=new Date,sid=o.getSiteId();if(body===undefined){body=""}var uri="et=rd_e_pal_event_open&sid="+sid+"&eid="+eid+"&vid="+vid+"&aid="+aid+"&vst="+vst+"&body="+body+"&kcache="+date.getTime()+Math.random()*1e6;o.sendImage(uri)}else{return false}},o.getScrollY=function(){EventUtil.addHandler(window,"scroll",function(){storage._getScrollYMax()})},o.getBlur=function(){EventUtil.addHandler(window,"blur",function(){storage.activeTime=storage.activeTime+((new Date).getTime()-storage.focusTime)})},o.getFocus=function(){EventUtil.addHandler(window,"focus",function(){storage.focusTime=(new Date).getTime()})};return o}var $=function(){var o=o||{};if(!CookieUtil.getRaw(daceVidCookieKey3)){saveVid3Cookie()}o.getTracker=function(a){var i=new init(a);EventUtil.addHandlerCompatibility(window,"load",function(){if(!CookieUtil.getRaw(daceUserFlag)){var con=new init("a");con.sendEvent("newUser");CookieUtil.setRaw(daceUserFlag,"old",{expires:864e6,domain:domainHost,path:"/"})}pageLoadTime=pageLoadTimeFun()});i.requestFun();i.clickRequestFun();i.getScrollY();i.getBlur();i.getFocus();i.leaveRequestFun();return i};return o};var _dace=new $;return _dace.getTracker(1)}(window);